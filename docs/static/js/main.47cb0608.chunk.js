(this["webpackJsonpsecret-hitler"]=this["webpackJsonpsecret-hitler"]||[]).push([[0],{33:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(10),a=t.n(c),l=t(8),o=t(1);function s(e){var n=e.onClick,t=e.children;return Object(o.jsx)("button",{onClick:n,children:t})}var d=t(11);var u,p,j=t(6),h=t(7),b=Object(h.a)(u||(u=Object(j.a)(["\n  body {\n    overflow: hidden;\n  }\n"]))),f=h.b.div(p||(p=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: 100vw;\n  position: fixed;\n  top: 0;\n  backdrop-filter: ",";\n"])),(function(e){return e.withBackdrop&&"brightness(40%)"}));var v=function(e){var n=e.open,t=e.onClose,i=e.children,r=e.withBackdrop;return n?Object(o.jsxs)(f,{withBackdrop:r,onClick:function(e){t&&e.target===e.currentTarget&&t()},children:[Object(o.jsx)(b,{}),Object(o.jsx)("dialog",{open:n,children:i})]}):Object(o.jsx)(o.Fragment,{})};function O(){return Object(o.jsx)("div",{children:"Chancellor"})}t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;function y(){return Object(o.jsx)("div",{children:"President"})}var m,g,x,C,P=(m=s,x=v,g=function(e){var n=e.open,t=e.onClose;return n?Object(o.jsx)(x,{withBackdrop:!0,open:n,onClose:t,children:Object(o.jsxs)("div",{children:["Secret Hitler is a game developed by Goat, Wolf, & Cabbage, licensed under the"," ",Object(o.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en",children:"CC BY-NC-SA 4.0"})]})}):Object(o.jsx)(o.Fragment,{})},function(){var e=Object(i.useState)(!1),n=Object(d.a)(e,2),t=n[0],r=n[1];return Object(o.jsxs)("footer",{children:[Object(o.jsx)(m,{onClick:function(){return r(!0)},children:"License"}),Object(o.jsx)(g,{open:t,onClose:function(){return r(!1)}})]})}),w=t(2),k=Object(w.b)("game/start"),E=["John","Martha","Bob","Alice","Mohammed"];function F(e,n,t){return t.chancellor!==t.president&&t.chancellor!==(null===n||void 0===n?void 0:n.chancellor)&&(t.chancellor!==(null===n||void 0===n?void 0:n.president)||5===e)}var V=h.b.div(C||(C=Object(j.a)(["\n  display: flex;\n"])));function S(e){var n=e.electionCounter;return Object(o.jsxs)("div",{children:["electionRound ",n,"/3"]})}function D(e){var n=e.playerId,t=e.onVote,i=e.playerVotes;return void 0!==i[n]?Object(o.jsx)("div",{children:i[n]?"Yes":"No"}):Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!0})},children:"Yes"}),Object(o.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!1})},children:"No"})]})}var A=function(e){return function(n){var t=n.onElectionAccepted,i=n.onElectionDeclined,r=n.playerVotes,c=n.players,a=Object.values(r).filter(Boolean).length>c.length/2,l=a?t:i;return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsxs)("div",{children:["Election ",a?"":"not"," accepted"]}),Object.entries(r).map((function(e){var n=Object(d.a)(e,2),t=n[0],i=n[1];return Object(o.jsxs)("div",{children:[c[parseInt(t)].name,": ",i?"Yes":"No"]},t)})),Object(o.jsx)("button",{onClick:l,children:"continue"})]})}}(v),I=function(e){return function(n){var t=n.onNomination,i=n.nominationValidator,r=n.avatarComponent,c=n.players,a=n.presidentialCandidate,l=n.government,s=null===a?[]:c.filter((function(e,n){return i(c.length,l,{president:a,chancellor:n})}));return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsx)("div",{children:"Please nominate your chancellor candidate."}),s.map((function(e){return Object(o.jsxs)(V,{children:[Object(o.jsx)("button",{onClick:function(){return t(c.findIndex((function(n){return n===e})))},children:"Nominate"}),r(e)]})}))]})}}(v),N=Object(w.b)("game/vote"),B=Object(w.b)("game/nominateChancellor"),M=Object(w.b)("game/acceptElection"),R=Object(w.b)("game/declineElection"),G=t(9);function L(e){for(var n=Object(G.a)(e),t=n.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=[n[i],n[t]];n[t]=r[0],n[i]=r[1]}return n}var Y=Object(w.b)("policy/draw"),J=Object(w.b)("policy/play");function T(e){var n=e.drawingPile,t=e.discardPile,i=e.nLiberalsPlayed,r=e.nFascistsPlayed;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["size draw pile: ",n.length]}),Object(o.jsxs)("div",{children:["size discard pile: ",t.length]}),Object(o.jsxs)("div",{children:["liberal policies enacted: ",i]}),Object(o.jsxs)("div",{children:["fascist policies enacted: ",r]})]})}var z,H=function(e){return function(n){var t=n.onDiscard,i=n.onPlay,r=n.isChancellorDiscard,c=n.drawingPile,a=r?2:3;return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsx)("div",{children:"select a policy to discard"}),c.slice(0,a).map((function(e,n){return Object(o.jsx)("button",{onClick:function(){return function(e){t(e),r&&i()}(n)},children:e},n)}))]})}}(v),W=function(e){var n=e.shuffle,t=e.createPolicyDeck,i=e.discardPolicyActionCreator,r=e.playPolicyActionCreator;return Object(w.c)(function(e){return{drawingPile:e(),discardPile:[],nLiberalsPlayed:0,nFascistsPlayed:0}}(t),(function(e){e.addCase(i,(function(e,n){var t=n.payload;e.discardPile.push(e.drawingPile[t]),e.drawingPile.splice(t,1)})).addCase(r,(function(e){"liberal"===e.drawingPile[0]?e.nLiberalsPlayed+=1:e.nFascistsPlayed+=1,e.drawingPile.splice(0,1),e.drawingPile.length<3&&(e.drawingPile=n([].concat(Object(G.a)(e.drawingPile),Object(G.a)(e.discardPile))),e.discardPile=[])}))}))}({shuffle:L,createPolicyDeck:(z=L,function(){for(var e=[],n=0;n<6;n++)e.push("liberal");for(var t=0;t<11;t++)e.push("fascist");return z(e)}),discardPolicyActionCreator:Y,playPolicyActionCreator:J}),q=t(19);var K=["hitler","fascist","liberal","liberal","liberal","liberal","fascist","liberal","fascist","liberal"];function Q(e){var n=e.player;return Object(o.jsxs)("div",{children:[n.title?n.title+" ":void 0,n.name,": ",n.role]})}var U,X=(U=function(e){return function(n){return e(function(e){return K.slice(0,e)}(n))}}(L),function(e){var n,t=U(e.length),i=Object(q.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=t.pop();if(void 0===c)throw Error("Assigning Roles Failed");r.role=c}}catch(a){i.e(a)}finally{i.f()}return e}),Z=function(e){var n=e.startGame,t=e.nominateChancellor,i=e.isValidNomination,r=e.nextPresidentialCandidate,c=e.vote,a=e.acceptElection,l=e.declineElection,o=e.assignRoles,s=e.discardPolicy,d=e.playPolicy;return Object(w.c)({phase:null,players:E.map((function(e){return{name:e,role:null,title:null}})),government:null,nominatedGovernment:null,presidentialCandidate:null,playerVotes:{},electionRound:0},(function(e){e.addCase(n,(function(e){e.phase="nominate",e.players=o(e.players),e.presidentialCandidate=r(e.presidentialCandidate,e.players)})).addCase(t,(function(e,n){var t=n.payload;if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");if(!i(e.players.length,e.government,{chancellor:t,president:e.presidentialCandidate}))throw Error("Election of ".concat(t," is not valid"));e.nominatedGovernment={president:e.presidentialCandidate,chancellor:t},e.phase="vote"})).addCase(c,(function(e,n){var t=n.payload,i=t.agreed,r=t.playerId;if(e.playerVotes[r])throw Error("player ".concat(r," already voted"));e.playerVotes[r]=i,Object.keys(e.playerVotes).length===e.players.length&&(e.phase="electionEvaluation")})).addCase(a,(function(e){e.electionRound=0,e.playerVotes={},e.government=e.nominatedGovernment,e.nominatedGovernment=null,e.phase="presidentSelectsPolicies"})).addCase(l,(function(e){if(3===e.electionRound)throw Error("failed election NYI");if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");e.electionRound+=1,e.playerVotes={},e.nominatedGovernment=null,e.presidentialCandidate=r(e.presidentialCandidate,e.players),e.phase="nominate"})).addCase(s,(function(e){"presidentSelectsPolicies"===e.phase&&(e.phase="chancellorSelectsPolicies")})).addCase(d,(function(e){e.phase="executiveAction"}))}))}({startGame:k,nominateChancellor:B,isValidNomination:F,nextPresidentialCandidate:function(e,n){return null===e?(t=0,i=n.length,t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t)+t)):(e+1)%n.length;var t,i},vote:N,acceptElection:M,declineElection:R,assignRoles:X,discardPolicy:Y,playPolicy:J});function $(){var e=Object(l.c)((function(e){return e})),n=e.gameState,t=n.players,r=n.playerVotes,c=n.phase,a=n.presidentialCandidate,d=n.electionRound,u=n.government,p=e.policyDeck,j=p.drawingPile,h=p.discardPile,b=p.nFascistsPlayed,f=p.nLiberalsPlayed,v=Object(l.b)(),m={nominate:Object(o.jsx)(I,{onNomination:function(e){return v(B(e))},nominationValidator:F,presidentialCandidate:a,players:t,government:u,avatarComponent:function(e){return Object(o.jsx)(Q,{player:e})}}),electionEvaluation:Object(o.jsx)(A,{onElectionAccepted:function(){return v(M())},onElectionDeclined:function(){return v(R())},playerVotes:r,players:t}),presidentSelectsPolicies:Object(o.jsx)(H,{onDiscard:function(e){return v(Y(e))},onPlay:function(){return v(J)},isChancellorDiscard:"chancellorSelectsPolicies"===c,drawingPile:j}),chancellorSelectsPolicies:Object(o.jsx)(H,{onDiscard:function(e){return v(Y(e))},onPlay:function(){return v(J)},isChancellorDiscard:"chancellorSelectsPolicies"===c,drawingPile:j}),executiveAction:Object(o.jsx)(o.Fragment,{}),vote:Object(o.jsx)(o.Fragment,{})};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:c}),Object(o.jsx)(T,{discardPile:h,drawingPile:j,nFascistsPlayed:b,nLiberalsPlayed:f}),Object(o.jsx)(S,{electionCounter:d}),t.map((function(e,n){return Object(o.jsxs)(i.Fragment,{children:[n===a?Object(o.jsx)(y,{}):Object(o.jsx)(o.Fragment,{}),n===(null===u||void 0===u?void 0:u.chancellor)?Object(o.jsx)(O,{}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)(Q,{player:e}),"vote"===c?Object(o.jsx)(D,{playerId:n,onVote:function(e){return v(N(e))},playerVotes:r}):Object(o.jsx)(o.Fragment,{})]},n)})),c?m[c]:Object(o.jsx)(s,{onClick:function(){return v(k())},children:"Start"}),Object(o.jsx)(P,{})]})}t(33);var _=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))},ee=Object(w.a)({reducer:{gameState:Z,policyDeck:W}});a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(l.a,{store:ee,children:Object(o.jsx)($,{})})}),document.getElementById("root")),_()}},[[34,1,2]]]);
//# sourceMappingURL=main.47cb0608.chunk.js.map