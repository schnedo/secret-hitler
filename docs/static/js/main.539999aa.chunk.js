(this["webpackJsonpsecret-hitler"]=this["webpackJsonpsecret-hitler"]||[]).push([[0],{29:function(e,n,t){},30:function(e,n,t){"use strict";t.r(n);var r,a,i=t(0),c=t.n(i),o=t(10),l=t.n(o),d=t(2),s=t(7),u=t(8),j=t(1);function p(e){var n=e.onClick,t=e.children;return Object(j.jsx)("button",{onClick:n,children:t})}var b=Object(u.a)(r||(r=Object(s.a)(["\n  body {\n    overflow: hidden;\n  }\n"]))),h=u.b.div(a||(a=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: 100vw;\n  position: fixed;\n  top: 0;\n  backdrop-filter: ",";\n"])),(function(e){return e.withBackdrop&&"brightness(40%)"}));var f=function(e){var n=e.open,t=e.onClose,r=e.children,a=e.withBackdrop;return n?Object(j.jsxs)(h,{withBackdrop:a,onClick:function(e){t&&e.target===e.currentTarget&&t()},children:[Object(j.jsx)(b,{}),Object(j.jsx)("dialog",{open:n,children:r})]}):Object(j.jsx)(j.Fragment,{})};function v(){return Object(j.jsx)("div",{children:"President"})}t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;function O(e,n,t){return t.chancellor!==t.president&&t.chancellor!==(null===n||void 0===n?void 0:n.chancellor)&&(t.chancellor!==(null===n||void 0===n?void 0:n.president)||5===e)}function m(e,n){return null===e?(t=0,r=n.length,t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t)+t)):(e+1)%n.length;var t,r}function g(e){var n=e.electionCounter;return Object(j.jsxs)("div",{children:["electionRound ",n,"/3"]})}var x=t(17);var y=["hitler","fascist","liberal","liberal","liberal","liberal","fascist","liberal","fascist","liberal"];var C=t(18);var k,w,E=(w=function(e){for(var n=Object(C.a)(e),t=n.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),a=[n[r],n[t]];n[t]=a[0],n[r]=a[1]}return n},k=function(e){return w(function(e){return y.slice(0,e)}(e))},function(e){var n,t=k(e.length),r=Object(x.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value,i=t.pop();if(void 0===i)throw Error("Assigning Roles Failed");a.role=i}}catch(c){r.e(c)}finally{r.f()}return e});function F(e){var n=e.player;return Object(j.jsxs)("div",{children:[n.title?n.title+" ":void 0,n.name,": ",n.role]})}var S=t(3),I=Object(S.b)("game/start"),B=Object(S.b)("game/nominateChancellor"),M=Object(S.b)("game/vote"),V=Object(S.b)("game/acceptElection"),R=Object(S.b)("game/declineElection"),G=["John","Martha","Bob","Alice","Mohammed"];var N,Y=Object(S.c)({phase:null,players:G.map((function(e){return{name:e,role:null,title:null}})),government:null,nominatedGovernment:null,presidentialCandidate:null,playerVotes:{},electionRound:0},(function(e){e.addCase(I,(function(e){e.phase="nominate",e.players=E(e.players),e.presidentialCandidate=m(e.presidentialCandidate,e.players)})).addCase(B,(function(e,n){var t=n.payload;if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");if(!O(e.players.length,e.government,{chancellor:t,president:e.presidentialCandidate}))throw Error("Election of ".concat(t," is not valid"));e.nominatedGovernment={president:e.presidentialCandidate,chancellor:t},e.phase="vote"})).addCase(M,(function(e,n){var t=n.payload,r=t.agreed,a=t.playerId;if(e.playerVotes[a])throw Error("player ".concat(a," already voted"));e.playerVotes[a]=r,Object.keys(e.playerVotes).length===e.players.length&&(e.phase="electionEvaluation")})).addCase(V,(function(e){e.electionRound=0,e.playerVotes={},e.government=e.nominatedGovernment,e.nominatedGovernment=null,e.phase="legislativeSession"})).addCase(R,(function(e){if(3===e.electionRound)throw Error("failed election NYI");if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");e.electionRound+=1,e.playerVotes={},e.nominatedGovernment=null,e.presidentialCandidate=m(e.presidentialCandidate,e.players),e.phase="nominate"}))})),P=u.b.div(N||(N=Object(s.a)(["\n  display: flex;\n"])));function A(){var e=Object(d.c)((function(e){return e.gameState})),n=e.phase,t=e.players,r=e.presidentialCandidate,a=e.government,i=Object(d.b)(),c=null===r?[]:t.filter((function(e,n){return O(t.length,a,{president:r,chancellor:n})}));return Object(j.jsxs)(f,{open:"nominate"===n,children:[Object(j.jsx)("div",{children:"Please nominate your chancellor candidate."}),c.map((function(e){return Object(j.jsxs)(P,{children:[Object(j.jsx)("button",{onClick:function(){return i(B(t.findIndex((function(n){return n===e}))))},children:"Nominate"}),Object(j.jsx)(F,{player:e})]})}))]})}function J(e){var n=e.playerId,t=Object(d.c)((function(e){return e.gameState})),r=t.phase,a=t.playerVotes,i=Object(d.b)();return"vote"!==r?Object(j.jsx)(j.Fragment,{}):void 0!==a[n]?Object(j.jsx)("div",{children:a[n]?"Yes":"No"}):Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return i(M({playerId:n,agreed:!0}))},children:"Yes"}),Object(j.jsx)("button",{onClick:function(){return i(M({playerId:n,agreed:!1}))},children:"No"})]})}var L=t(11);function T(){var e=Object(d.c)((function(e){return e.gameState})),n=e.phase,t=e.playerVotes,r=e.players,a=Object(d.b)();if("electionEvaluation"!==n)return Object(j.jsx)(j.Fragment,{});var i=Object.values(t).filter(Boolean).length>r.length/2;return Object(j.jsxs)(f,{open:!0,children:[Object(j.jsxs)("div",{children:["Election ",i?"":"not"," accepted"]}),Object.entries(t).map((function(e){var n=Object(L.a)(e,2),t=n[0],a=n[1];return Object(j.jsxs)("div",{children:[r[parseInt(t)].name,": ",a?"Yes":"No"]},t)})),Object(j.jsx)("button",{onClick:function(){return a(i?V():R())},children:"continue"})]})}function D(e){var n=e.open,t=e.onClose;return n?Object(j.jsx)(f,{withBackdrop:!0,open:n,onClose:t,children:Object(j.jsxs)("div",{children:["Secret Hitler is a game developed by Goat, Wolf, & Cabbage, licensed under the"," ",Object(j.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en",children:"CC BY-NC-SA 4.0"})]})}):Object(j.jsx)(j.Fragment,{})}function H(){var e=Object(i.useState)(!1),n=Object(L.a)(e,2),t=n[0],r=n[1];return Object(j.jsxs)("footer",{children:[Object(j.jsx)(p,{onClick:function(){return r(!0)},children:"License"}),Object(j.jsx)(D,{open:t,onClose:function(){return r(!1)}})]})}function W(){var e=Object(d.c)((function(e){return e.gameState})),n=e.players,t=e.phase,r=e.presidentialCandidate,a=e.electionRound,c=Object(d.b)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:t}),Object(j.jsx)(g,{electionCounter:a}),n.map((function(e,n){return Object(j.jsxs)(i.Fragment,{children:[n===r?Object(j.jsx)(v,{}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)(F,{player:e}),Object(j.jsx)(J,{playerId:n})]},n)})),Object(j.jsx)(A,{}),Object(j.jsx)(T,{}),null!==t?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)(p,{onClick:function(){return c(I())},children:"Start"}),Object(j.jsx)(H,{})]})}t(29);var q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,31)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),r(e),a(e),i(e),c(e)}))},z=Object(S.a)({reducer:{gameState:Y}});l.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(d.a,{store:z,children:Object(j.jsx)(W,{})})}),document.getElementById("root")),q()}},[[30,1,2]]]);
//# sourceMappingURL=main.539999aa.chunk.js.map