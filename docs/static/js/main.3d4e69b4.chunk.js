(this["webpackJsonpsecret-hitler"]=this["webpackJsonpsecret-hitler"]||[]).push([[0],{33:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(10),a=t.n(c),o=t(3),l=t(1);function s(e){var n=e.onClick,t=e.children;return Object(l.jsx)("button",{onClick:n,children:t})}var d=t(11);var u,j,p=t(7),b=t(8),h=Object(b.a)(u||(u=Object(p.a)(["\n  body {\n    overflow: hidden;\n  }\n"]))),f=b.b.div(j||(j=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: 100vw;\n  position: fixed;\n  top: 0;\n  backdrop-filter: ",";\n"])),(function(e){return e.withBackdrop&&"brightness(40%)"}));var v=function(e){var n=e.open,t=e.onClose,i=e.children,r=e.withBackdrop;return n?Object(l.jsxs)(f,{withBackdrop:r,onClick:function(e){t&&e.target===e.currentTarget&&t()},children:[Object(l.jsx)(h,{}),Object(l.jsx)("dialog",{open:n,children:i})]}):Object(l.jsx)(l.Fragment,{})};function O(){return Object(l.jsx)("div",{children:"Chancellor"})}t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;function m(){return Object(l.jsx)("div",{children:"President"})}var g,y,x,C,P=(g=s,x=v,y=function(e){var n=e.open,t=e.onClose;return n?Object(l.jsx)(x,{withBackdrop:!0,open:n,onClose:t,children:Object(l.jsxs)("div",{children:["Secret Hitler is a game developed by Goat, Wolf, & Cabbage, licensed under the"," ",Object(l.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en",children:"CC BY-NC-SA 4.0"})]})}):Object(l.jsx)(l.Fragment,{})},function(){var e=Object(i.useState)(!1),n=Object(d.a)(e,2),t=n[0],r=n[1];return Object(l.jsxs)("footer",{children:[Object(l.jsx)(g,{onClick:function(){return r(!0)},children:"License"}),Object(l.jsx)(y,{open:t,onClose:function(){return r(!1)}})]})}),w=t(2),k=Object(w.b)("game/start"),E=["John","Martha","Bob","Alice","Mohammed"];function S(e,n,t){return t.chancellor!==t.president&&t.chancellor!==(null===n||void 0===n?void 0:n.chancellor)&&(t.chancellor!==(null===n||void 0===n?void 0:n.president)||5===e)}var F=b.b.div(C||(C=Object(p.a)(["\n  display: flex;\n"])));function V(e){var n=e.electionCounter;return Object(l.jsxs)("div",{children:["electionRound ",n,"/3"]})}function D(e){var n=e.playerId,t=e.onVote,i=Object(o.c)((function(e){return e.gameState})),r=i.phase,c=i.playerVotes;return"vote"!==r?Object(l.jsx)(l.Fragment,{}):void 0!==c[n]?Object(l.jsx)("div",{children:c[n]?"Yes":"No"}):Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!0})},children:"Yes"}),Object(l.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!1})},children:"No"})]})}var A=function(e){return function(n){var t=n.onElectionAccepted,i=n.onElectionDeclined,r=Object(o.c)((function(e){return e.gameState})),c=r.phase,a=r.playerVotes,s=r.players;if("electionEvaluation"!==c)return Object(l.jsx)(l.Fragment,{});var u=Object.values(a).filter(Boolean).length>s.length/2,j=u?t:i;return Object(l.jsxs)(e,{open:!0,children:[Object(l.jsxs)("div",{children:["Election ",u?"":"not"," accepted"]}),Object.entries(a).map((function(e){var n=Object(d.a)(e,2),t=n[0],i=n[1];return Object(l.jsxs)("div",{children:[s[parseInt(t)].name,": ",i?"Yes":"No"]},t)})),Object(l.jsx)("button",{onClick:j,children:"continue"})]})}}(v),I=function(e){return function(n){var t=n.onNomination,i=n.nominationValidator,r=n.avatarComponent,c=Object(o.c)((function(e){return e.gameState})),a=c.phase,s=c.players,d=c.presidentialCandidate,u=c.government,j=null===d?[]:s.filter((function(e,n){return i(s.length,u,{president:d,chancellor:n})}));return Object(l.jsxs)(e,{open:"nominate"===a,children:[Object(l.jsx)("div",{children:"Please nominate your chancellor candidate."}),j.map((function(e){return Object(l.jsxs)(F,{children:[Object(l.jsx)("button",{onClick:function(){return t(s.findIndex((function(n){return n===e})))},children:"Nominate"}),r(e)]})}))]})}}(v),N=Object(w.b)("game/vote"),B=Object(w.b)("game/nominateChancellor"),M=Object(w.b)("game/acceptElection"),R=Object(w.b)("game/declineElection"),G=t(9);function L(e){for(var n=Object(G.a)(e),t=n.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=[n[i],n[t]];n[t]=r[0],n[i]=r[1]}return n}var Y=Object(w.b)("policy/draw"),J=Object(w.b)("policy/play");function T(){var e=Object(o.c)((function(e){return e.policyDeck}));return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:["size draw pile: ",e.drawingPile.length]}),Object(l.jsxs)("div",{children:["size discard pile: ",e.discardPile.length]}),Object(l.jsxs)("div",{children:["liberal policies enacted: ",e.nLiberalsPlayed]}),Object(l.jsxs)("div",{children:["fascist policies enacted: ",e.nFascistsPlayed]})]})}var z,H=function(e){return function(n){var t=n.onDiscard,i=n.onPlay,r=Object(o.c)((function(e){return{gameState:e.gameState,policyDeck:e.policyDeck}})),c=r.gameState.phase,a=r.policyDeck.drawingPile;if("presidentSelectsPolicies"!==c&&"chancellorSelectsPolicies"!==c)return Object(l.jsx)(l.Fragment,{});var s="chancellorSelectsPolicies"===c,d=s?2:3;return Object(l.jsxs)(e,{open:!0,children:[Object(l.jsx)("div",{children:"select a policy to discard"}),a.slice(0,d).map((function(e,n){return Object(l.jsx)("button",{onClick:function(){return function(e){t(e),s&&i()}(n)},children:e},n)}))]})}}(v),W=function(e){var n=e.shuffle,t=e.createPolicyDeck,i=e.discardPolicyActionCreator,r=e.playPolicyActionCreator;return Object(w.c)(function(e){return{drawingPile:e(),discardPile:[],nLiberalsPlayed:0,nFascistsPlayed:0}}(t),(function(e){e.addCase(i,(function(e,n){var t=n.payload;e.discardPile.push(e.drawingPile[t]),e.drawingPile.splice(t,1)})).addCase(r,(function(e){"liberal"===e.drawingPile[0]?e.nLiberalsPlayed+=1:e.nFascistsPlayed+=1,e.drawingPile.splice(0,1),e.drawingPile.length<3&&(e.drawingPile=n([].concat(Object(G.a)(e.drawingPile),Object(G.a)(e.discardPile))),e.discardPile=[])}))}))}({shuffle:L,createPolicyDeck:(z=L,function(){for(var e=[],n=0;n<6;n++)e.push("liberal");for(var t=0;t<11;t++)e.push("fascist");return z(e)}),discardPolicyActionCreator:Y,playPolicyActionCreator:J}),q=t(19);var K=["hitler","fascist","liberal","liberal","liberal","liberal","fascist","liberal","fascist","liberal"];var Q,U=(Q=function(e){return function(n){return e(function(e){return K.slice(0,e)}(n))}}(L),function(e){var n,t=Q(e.length),i=Object(q.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=t.pop();if(void 0===c)throw Error("Assigning Roles Failed");r.role=c}}catch(a){i.e(a)}finally{i.f()}return e});function X(e){var n=e.player;return Object(l.jsxs)("div",{children:[n.title?n.title+" ":void 0,n.name,": ",n.role]})}var Z=function(e){var n=e.startGame,t=e.nominateChancellor,i=e.isValidNomination,r=e.nextPresidentialCandidate,c=e.vote,a=e.acceptElection,o=e.declineElection,l=e.assignRoles,s=e.discardPolicy,d=e.playPolicy;return Object(w.c)({phase:null,players:E.map((function(e){return{name:e,role:null,title:null}})),government:null,nominatedGovernment:null,presidentialCandidate:null,playerVotes:{},electionRound:0},(function(e){e.addCase(n,(function(e){e.phase="nominate",e.players=l(e.players),e.presidentialCandidate=r(e.presidentialCandidate,e.players)})).addCase(t,(function(e,n){var t=n.payload;if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");if(!i(e.players.length,e.government,{chancellor:t,president:e.presidentialCandidate}))throw Error("Election of ".concat(t," is not valid"));e.nominatedGovernment={president:e.presidentialCandidate,chancellor:t},e.phase="vote"})).addCase(c,(function(e,n){var t=n.payload,i=t.agreed,r=t.playerId;if(e.playerVotes[r])throw Error("player ".concat(r," already voted"));e.playerVotes[r]=i,Object.keys(e.playerVotes).length===e.players.length&&(e.phase="electionEvaluation")})).addCase(a,(function(e){e.electionRound=0,e.playerVotes={},e.government=e.nominatedGovernment,e.nominatedGovernment=null,e.phase="presidentSelectsPolicies"})).addCase(o,(function(e){if(3===e.electionRound)throw Error("failed election NYI");if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");e.electionRound+=1,e.playerVotes={},e.nominatedGovernment=null,e.presidentialCandidate=r(e.presidentialCandidate,e.players),e.phase="nominate"})).addCase(s,(function(e){"presidentSelectsPolicies"===e.phase&&(e.phase="chancellorSelectsPolicies")})).addCase(d,(function(e){e.phase="executiveAction"}))}))}({startGame:k,nominateChancellor:B,isValidNomination:S,nextPresidentialCandidate:function(e,n){return null===e?(t=0,i=n.length,t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t)+t)):(e+1)%n.length;var t,i},vote:N,acceptElection:M,declineElection:R,assignRoles:U,discardPolicy:Y,playPolicy:J});function $(){var e=Object(o.c)((function(e){return e.gameState})),n=e.players,t=e.phase,r=e.presidentialCandidate,c=e.electionRound,a=e.government,d=Object(o.b)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:t}),Object(l.jsx)(T,{}),Object(l.jsx)(V,{electionCounter:c}),n.map((function(e,n){return Object(l.jsxs)(i.Fragment,{children:[n===r?Object(l.jsx)(m,{}):Object(l.jsx)(l.Fragment,{}),n===(null===a||void 0===a?void 0:a.chancellor)?Object(l.jsx)(O,{}):Object(l.jsx)(l.Fragment,{}),Object(l.jsx)(X,{player:e}),Object(l.jsx)(D,{playerId:n,onVote:function(e){return d(N(e))}})]},n)})),Object(l.jsx)(I,{onNomination:function(e){return d(B(e))},nominationValidator:S,avatarComponent:function(e){return Object(l.jsx)(X,{player:e})}}),"electionEvaluation"===t?Object(l.jsx)(A,{onElectionAccepted:function(){return d(M())},onElectionDeclined:function(){return d(R())}}):Object(l.jsx)(l.Fragment,{}),Object(l.jsx)(H,{onDiscard:function(e){return d(Y(e))},onPlay:function(){return d(J)}}),null!==t?Object(l.jsx)(l.Fragment,{}):Object(l.jsx)(s,{onClick:function(){return d(k())},children:"Start"}),Object(l.jsx)(P,{})]})}t(33);var _=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))},ee=Object(w.a)({reducer:{gameState:Z,policyDeck:W}});a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(o.a,{store:ee,children:Object(l.jsx)($,{})})}),document.getElementById("root")),_()}},[[34,1,2]]]);
//# sourceMappingURL=main.3d4e69b4.chunk.js.map