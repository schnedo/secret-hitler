(this["webpackJsonpsecret-hitler"]=this["webpackJsonpsecret-hitler"]||[]).push([[0],{33:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var r,i,c=t(0),a=t.n(c),l=t(10),o=t.n(l),s=t(2),d=t(6),u=t(7),j=t(1);function p(e){var n=e.onClick,t=e.children;return Object(j.jsx)("button",{onClick:n,children:t})}var b=Object(u.a)(r||(r=Object(d.a)(["\n  body {\n    overflow: hidden;\n  }\n"]))),h=u.b.div(i||(i=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: 100vw;\n  position: fixed;\n  top: 0;\n  backdrop-filter: ",";\n"])),(function(e){return e.withBackdrop&&"brightness(40%)"}));var f=function(e){var n=e.open,t=e.onClose,r=e.children,i=e.withBackdrop;return n?Object(j.jsxs)(h,{withBackdrop:i,onClick:function(e){t&&e.target===e.currentTarget&&t()},children:[Object(j.jsx)(b,{}),Object(j.jsx)("dialog",{open:n,children:r})]}):Object(j.jsx)(j.Fragment,{})};function O(){return Object(j.jsx)("div",{children:"President"})}function v(){return Object(j.jsx)("div",{children:"Chancellor"})}t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;function g(e,n,t){return t.chancellor!==t.president&&t.chancellor!==(null===n||void 0===n?void 0:n.chancellor)&&(t.chancellor!==(null===n||void 0===n?void 0:n.president)||5===e)}function m(e,n){return null===e?(t=0,r=n.length,t=Math.ceil(t),r=Math.floor(r),Math.floor(Math.random()*(r-t)+t)):(e+1)%n.length;var t,r}function x(e){var n=e.electionCounter;return Object(j.jsxs)("div",{children:["electionRound ",n,"/3"]})}var y=t(19);var C=["hitler","fascist","liberal","liberal","liberal","liberal","fascist","liberal","fascist","liberal"];var P=t(9);function w(e){for(var n=Object(P.a)(e),t=n.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),i=[n[r],n[t]];n[t]=i[0],n[r]=i[1]}return n}var k,S,F=(S=w,k=function(e){return S(function(e){return C.slice(0,e)}(e))},function(e){var n,t=k(e.length),r=Object(y.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,c=t.pop();if(void 0===c)throw Error("Assigning Roles Failed");i.role=c}}catch(a){r.e(a)}finally{r.f()}return e});function E(e){var n=e.player;return Object(j.jsxs)("div",{children:[n.title?n.title+" ":void 0,n.name,": ",n.role]})}var I=t(3),B=Object(I.b)("game/start"),M=Object(I.b)("game/nominateChancellor"),V=Object(I.b)("game/vote"),R=Object(I.b)("game/acceptElection"),D=Object(I.b)("game/declineElection");function G(){for(var e=[],n=0;n<6;n++)e.push("liberal");for(var t=0;t<11;t++)e.push("fascist");return w(e)}var L=Object(I.b)("policy/draw"),N=Object(I.b)("policy/play");var Y=Object(I.c)({drawingPile:G(),discardPile:[],nLiberalsPlayed:0,nFascistsPlayed:0},(function(e){e.addCase(L,(function(e,n){var t=n.payload;e.discardPile.push(e.drawingPile[t]),e.drawingPile.splice(t,1)})).addCase(N,(function(e){"liberal"===e.drawingPile[0]?e.nLiberalsPlayed+=1:e.nFascistsPlayed+=1,e.drawingPile.splice(0,1),e.drawingPile.length<3&&(e.drawingPile=w([].concat(Object(P.a)(e.drawingPile),Object(P.a)(e.discardPile))),e.discardPile=[])}))})),A=["John","Martha","Bob","Alice","Mohammed"];var J,T=Object(I.c)({phase:null,players:A.map((function(e){return{name:e,role:null,title:null}})),government:null,nominatedGovernment:null,presidentialCandidate:null,playerVotes:{},electionRound:0},(function(e){e.addCase(B,(function(e){e.phase="nominate",e.players=F(e.players),e.presidentialCandidate=m(e.presidentialCandidate,e.players)})).addCase(M,(function(e,n){var t=n.payload;if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");if(!g(e.players.length,e.government,{chancellor:t,president:e.presidentialCandidate}))throw Error("Election of ".concat(t," is not valid"));e.nominatedGovernment={president:e.presidentialCandidate,chancellor:t},e.phase="vote"})).addCase(V,(function(e,n){var t=n.payload,r=t.agreed,i=t.playerId;if(e.playerVotes[i])throw Error("player ".concat(i," already voted"));e.playerVotes[i]=r,Object.keys(e.playerVotes).length===e.players.length&&(e.phase="electionEvaluation")})).addCase(R,(function(e){e.electionRound=0,e.playerVotes={},e.government=e.nominatedGovernment,e.nominatedGovernment=null,e.phase="presidentSelectsPolicies"})).addCase(D,(function(e){if(3===e.electionRound)throw Error("failed election NYI");if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");e.electionRound+=1,e.playerVotes={},e.nominatedGovernment=null,e.presidentialCandidate=m(e.presidentialCandidate,e.players),e.phase="nominate"})).addCase(L,(function(e){"presidentSelectsPolicies"===e.phase&&(e.phase="chancellorSelectsPolicies")})).addCase(N,(function(e){e.phase="executiveAction"}))})),z=u.b.div(J||(J=Object(d.a)(["\n  display: flex;\n"])));function H(){var e=Object(s.c)((function(e){return e.gameState})),n=e.phase,t=e.players,r=e.presidentialCandidate,i=e.government,c=Object(s.b)(),a=null===r?[]:t.filter((function(e,n){return g(t.length,i,{president:r,chancellor:n})}));return Object(j.jsxs)(f,{open:"nominate"===n,children:[Object(j.jsx)("div",{children:"Please nominate your chancellor candidate."}),a.map((function(e){return Object(j.jsxs)(z,{children:[Object(j.jsx)("button",{onClick:function(){return c(M(t.findIndex((function(n){return n===e}))))},children:"Nominate"}),Object(j.jsx)(E,{player:e})]})}))]})}function W(e){var n=e.playerId,t=Object(s.c)((function(e){return e.gameState})),r=t.phase,i=t.playerVotes,c=Object(s.b)();return"vote"!==r?Object(j.jsx)(j.Fragment,{}):void 0!==i[n]?Object(j.jsx)("div",{children:i[n]?"Yes":"No"}):Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return c(V({playerId:n,agreed:!0}))},children:"Yes"}),Object(j.jsx)("button",{onClick:function(){return c(V({playerId:n,agreed:!1}))},children:"No"})]})}var q=t(11);function K(){var e=Object(s.c)((function(e){return e.gameState})),n=e.phase,t=e.playerVotes,r=e.players,i=Object(s.b)();if("electionEvaluation"!==n)return Object(j.jsx)(j.Fragment,{});var c=Object.values(t).filter(Boolean).length>r.length/2;return Object(j.jsxs)(f,{open:!0,children:[Object(j.jsxs)("div",{children:["Election ",c?"":"not"," accepted"]}),Object.entries(t).map((function(e){var n=Object(q.a)(e,2),t=n[0],i=n[1];return Object(j.jsxs)("div",{children:[r[parseInt(t)].name,": ",i?"Yes":"No"]},t)})),Object(j.jsx)("button",{onClick:function(){return i(c?R():D())},children:"continue"})]})}function Q(e){var n=e.open,t=e.onClose;return n?Object(j.jsx)(f,{withBackdrop:!0,open:n,onClose:t,children:Object(j.jsxs)("div",{children:["Secret Hitler is a game developed by Goat, Wolf, & Cabbage, licensed under the"," ",Object(j.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en",children:"CC BY-NC-SA 4.0"})]})}):Object(j.jsx)(j.Fragment,{})}function U(){var e=Object(c.useState)(!1),n=Object(q.a)(e,2),t=n[0],r=n[1];return Object(j.jsxs)("footer",{children:[Object(j.jsx)(p,{onClick:function(){return r(!0)},children:"License"}),Object(j.jsx)(Q,{open:t,onClose:function(){return r(!1)}})]})}function X(){var e=Object(s.c)((function(e){return e.policyDeck}));return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:["size draw pile: ",e.drawingPile.length]}),Object(j.jsxs)("div",{children:["size discard pile: ",e.discardPile.length]}),Object(j.jsxs)("div",{children:["liberal policies enacted: ",e.nLiberalsPlayed]}),Object(j.jsxs)("div",{children:["fascist policies enacted: ",e.nFascistsPlayed]})]})}function Z(){var e=Object(s.c)((function(e){return{gameState:e.gameState,policyDeck:e.policyDeck}})),n=e.gameState.phase,t=e.policyDeck.drawingPile,r=Object(s.b)();if("presidentSelectsPolicies"!==n&&"chancellorSelectsPolicies"!==n)return Object(j.jsx)(j.Fragment,{});var i="chancellorSelectsPolicies"===n,c=i?2:3;return Object(j.jsxs)(f,{open:!0,children:[Object(j.jsx)("div",{children:"select a policy to discard"}),t.slice(0,c).map((function(e,n){return Object(j.jsx)("button",{onClick:function(){return function(e){r(L(e)),i&&r(N())}(n)},children:e},n)}))]})}function $(){var e=Object(s.c)((function(e){return e.gameState})),n=e.players,t=e.phase,r=e.presidentialCandidate,i=e.electionRound,a=e.government,l=Object(s.b)();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{children:t}),Object(j.jsx)(X,{}),Object(j.jsx)(x,{electionCounter:i}),n.map((function(e,n){return Object(j.jsxs)(c.Fragment,{children:[n===r?Object(j.jsx)(O,{}):Object(j.jsx)(j.Fragment,{}),n===(null===a||void 0===a?void 0:a.chancellor)?Object(j.jsx)(v,{}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)(E,{player:e}),Object(j.jsx)(W,{playerId:n})]},n)})),Object(j.jsx)(H,{}),Object(j.jsx)(K,{}),Object(j.jsx)(Z,{}),null!==t?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)(p,{onClick:function(){return l(B())},children:"Start"}),Object(j.jsx)(U,{})]})}t(33);var _=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),c(e),a(e)}))},ee=Object(I.a)({reducer:{gameState:T,policyDeck:Y}});o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(s.a,{store:ee,children:Object(j.jsx)($,{})})}),document.getElementById("root")),_()}},[[34,1,2]]]);
//# sourceMappingURL=main.03c2e0de.chunk.js.map