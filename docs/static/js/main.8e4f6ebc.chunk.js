(this["webpackJsonpsecret-hitler"]=this["webpackJsonpsecret-hitler"]||[]).push([[0],{33:function(e,n,t){},34:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(10),a=t.n(c),l=t(8),o=t(1);function s(e){var n=e.onClick,t=e.children;return Object(o.jsx)("button",{onClick:n,children:t})}var d=t(11);var u,j,p=t(6),h=t(7),b=Object(h.a)(u||(u=Object(p.a)(["\n  body {\n    overflow: hidden;\n  }\n"]))),f=h.b.div(j||(j=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  min-width: 100vw;\n  position: fixed;\n  top: 0;\n  backdrop-filter: ",";\n"])),(function(e){return e.withBackdrop&&"brightness(40%)"}));var v=function(e){var n=e.open,t=e.onClose,i=e.children,r=e.withBackdrop;return n?Object(o.jsxs)(f,{withBackdrop:r,onClick:function(e){t&&e.target===e.currentTarget&&t()},children:[Object(o.jsx)(b,{}),Object(o.jsx)("dialog",{open:n,children:i})]}):Object(o.jsx)(o.Fragment,{})};function O(){return Object(o.jsx)("div",{children:"Chancellor"})}t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;t.p;function y(){return Object(o.jsx)("div",{children:"President"})}var g,m,x,C=(g=s,x=v,m=function(e){var n=e.open,t=e.onClose;return n?Object(o.jsx)(x,{withBackdrop:!0,open:n,onClose:t,children:Object(o.jsxs)("div",{children:["Secret Hitler is a game developed by Goat, Wolf, & Cabbage, licensed under the"," ",Object(o.jsx)("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en",children:"CC BY-NC-SA 4.0"})]})}):Object(o.jsx)(o.Fragment,{})},function(){var e=Object(i.useState)(!1),n=Object(d.a)(e,2),t=n[0],r=n[1];return Object(o.jsxs)("footer",{children:[Object(o.jsx)(g,{onClick:function(){return r(!0)},children:"License"}),Object(o.jsx)(m,{open:t,onClose:function(){return r(!1)}})]})}),P=t(2),w=Object(P.b)("game/start"),k=["John","Martha","Bob","Alice","Mohammed"];function E(e,n,t){return t.chancellor!==t.president&&t.chancellor!==(null===n||void 0===n?void 0:n.chancellor)&&(t.chancellor!==(null===n||void 0===n?void 0:n.president)||5===e)}var F=t(9);function V(e){for(var n=Object(F.a)(e),t=n.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),r=[n[i],n[t]];n[t]=r[0],n[i]=r[1]}return n}var S=t(19);var D=["hitler","fascist","liberal","liberal","liberal","liberal","fascist","liberal","fascist","liberal"];function A(e){var n=e.player;return Object(o.jsxs)("div",{children:[n.title?n.title+" ":void 0,n.name,": ",n.role]})}var I,N,B,M=(N=V,I=function(e){return N(function(e){return D.slice(0,e)}(e))},function(e){var n,t=I(e.length),i=Object(S.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,c=t.pop();if(void 0===c)throw Error("Assigning Roles Failed");r.role=c}}catch(a){i.e(a)}finally{i.f()}return e}),R=h.b.div(B||(B=Object(p.a)(["\n  display: flex;\n"])));function G(e){var n=e.electionCounter;return Object(o.jsxs)("div",{children:["electionRound ",n,"/3"]})}function L(e){var n=e.playerId,t=e.onVote,i=e.playerVotes;return void 0!==i[n]?Object(o.jsx)("div",{children:i[n]?"Yes":"No"}):Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!0})},children:"Yes"}),Object(o.jsx)("button",{onClick:function(){return t({playerId:n,agreed:!1})},children:"No"})]})}var Y=function(e){return function(n){var t=n.onElectionAccepted,i=n.onElectionDeclined,r=n.playerVotes,c=n.players,a=Object.values(r).filter(Boolean).length>c.length/2,l=a?t:i;return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsxs)("div",{children:["Election ",a?"":"not"," accepted"]}),Object.entries(r).map((function(e){var n=Object(d.a)(e,2),t=n[0],i=n[1];return Object(o.jsxs)("div",{children:[c[parseInt(t)].name,": ",i?"Yes":"No"]},t)})),Object(o.jsx)("button",{onClick:l,children:"continue"})]})}}(v),J=function(e,n){return function(t){var i=t.onNomination,r=t.nominationValidator,c=t.players,a=t.presidentialCandidate,l=t.government,s=null===a?[]:c.filter((function(e,n){return r(c.length,l,{president:a,chancellor:n})}));return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsx)("div",{children:"Please nominate your chancellor candidate."}),s.map((function(e){return Object(o.jsxs)(R,{children:[Object(o.jsxs)("button",{onClick:function(){return i(c.findIndex((function(n){return n===e})))},children:["Nominate ",e.name]}),Object(o.jsx)(n,{player:e})]})}))]})}}(v,A),T=Object(P.b)("game/vote"),z=Object(P.b)("game/nominateChancellor"),H=Object(P.b)("game/acceptElection"),W=Object(P.b)("game/declineElection"),q=Object(P.b)("policy/draw"),K=Object(P.b)("policy/play");function Q(e){var n=e.drawingPile,t=e.discardPile,i=e.nLiberalsPlayed,r=e.nFascistsPlayed;return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{children:["size draw pile: ",n.length]}),Object(o.jsxs)("div",{children:["size discard pile: ",t.length]}),Object(o.jsxs)("div",{children:["liberal policies enacted: ",i]}),Object(o.jsxs)("div",{children:["fascist policies enacted: ",r]})]})}var U=function(e){return function(n){var t=n.onDiscard,i=n.onPlay,r=n.isChancellorDiscard,c=n.drawingPile,a=r?2:3;return Object(o.jsxs)(e,{open:!0,children:[Object(o.jsx)("div",{children:"select a policy to discard"}),c.slice(0,a).map((function(e,n){return Object(o.jsx)("button",{onClick:function(){return function(e){t(e),r&&i()}(n)},children:e},n)}))]})}}(v),X=function(e){var n=e.shuffle,t=e.createPolicyDeck,i=e.discardPolicyActionCreator,r=e.playPolicyActionCreator;return Object(P.c)(function(e){return{drawingPile:e(),discardPile:[],nLiberalsPlayed:0,nFascistsPlayed:0}}(t),(function(e){e.addCase(i,(function(e,n){var t=n.payload;e.discardPile.push(e.drawingPile[t]),e.drawingPile.splice(t,1)})).addCase(r,(function(e){"liberal"===e.drawingPile[0]?e.nLiberalsPlayed+=1:e.nFascistsPlayed+=1,e.drawingPile.splice(0,1),e.drawingPile.length<3&&(e.drawingPile=n([].concat(Object(F.a)(e.drawingPile),Object(F.a)(e.discardPile))),e.discardPile=[])}))}))}({shuffle:V,createPolicyDeck:function(e){return function(){for(var n=[],t=0;t<6;t++)n.push("liberal");for(var i=0;i<11;i++)n.push("fascist");return e(n)}}(V),discardPolicyActionCreator:q,playPolicyActionCreator:K}),Z=function(e){var n=e.startGame,t=e.nominateChancellor,i=e.isValidNomination,r=e.nextPresidentialCandidate,c=e.vote,a=e.acceptElection,l=e.declineElection,o=e.assignRoles,s=e.discardPolicy,d=e.playPolicy;return Object(P.c)({phase:null,players:k.map((function(e){return{name:e,role:null,title:null}})),government:null,nominatedGovernment:null,presidentialCandidate:null,playerVotes:{},electionRound:0},(function(e){e.addCase(n,(function(e){e.phase="nominate",e.players=o(e.players),e.presidentialCandidate=r(e.presidentialCandidate,e.players)})).addCase(t,(function(e,n){var t=n.payload;if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");if(!i(e.players.length,e.government,{chancellor:t,president:e.presidentialCandidate}))throw Error("Election of ".concat(t," is not valid"));e.nominatedGovernment={president:e.presidentialCandidate,chancellor:t},e.phase="vote"})).addCase(c,(function(e,n){var t=n.payload,i=t.agreed,r=t.playerId;if(e.playerVotes[r])throw Error("player ".concat(r," already voted"));e.playerVotes[r]=i,Object.keys(e.playerVotes).length===e.players.length&&(e.phase="electionEvaluation")})).addCase(a,(function(e){e.electionRound=0,e.playerVotes={},e.government=e.nominatedGovernment,e.nominatedGovernment=null,e.phase="presidentSelectsPolicies"})).addCase(l,(function(e){if(3===e.electionRound)throw Error("failed election NYI");if(null===e.presidentialCandidate)throw Error("cannot nominate chancellor without presidential candidate");e.electionRound+=1,e.playerVotes={},e.nominatedGovernment=null,e.presidentialCandidate=r(e.presidentialCandidate,e.players),e.phase="nominate"})).addCase(s,(function(e){"presidentSelectsPolicies"===e.phase&&(e.phase="chancellorSelectsPolicies")})).addCase(d,(function(e){e.phase="executiveAction"}))}))}({startGame:w,nominateChancellor:z,isValidNomination:E,nextPresidentialCandidate:function(e,n){return null===e?(t=0,i=n.length,t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t)+t)):(e+1)%n.length;var t,i},vote:T,acceptElection:H,declineElection:W,assignRoles:M,discardPolicy:q,playPolicy:K});function $(){var e=Object(l.c)((function(e){return e})),n=e.gameState,t=n.players,r=n.playerVotes,c=n.phase,a=n.presidentialCandidate,d=n.electionRound,u=n.government,j=e.policyDeck,p=j.drawingPile,h=j.discardPile,b=j.nFascistsPlayed,f=j.nLiberalsPlayed,v=Object(l.b)(),g={nominate:Object(o.jsx)(J,{onNomination:function(e){return v(z(e))},nominationValidator:E,presidentialCandidate:a,players:t,government:u}),electionEvaluation:Object(o.jsx)(Y,{onElectionAccepted:function(){return v(H())},onElectionDeclined:function(){return v(W())},playerVotes:r,players:t}),presidentSelectsPolicies:Object(o.jsx)(U,{onDiscard:function(e){return v(q(e))},onPlay:function(){return v(K)},isChancellorDiscard:"chancellorSelectsPolicies"===c,drawingPile:p}),chancellorSelectsPolicies:Object(o.jsx)(U,{onDiscard:function(e){return v(q(e))},onPlay:function(){return v(K)},isChancellorDiscard:"chancellorSelectsPolicies"===c,drawingPile:p}),executiveAction:Object(o.jsx)(o.Fragment,{}),vote:Object(o.jsx)(o.Fragment,{})};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:c}),Object(o.jsx)(Q,{discardPile:h,drawingPile:p,nFascistsPlayed:b,nLiberalsPlayed:f}),Object(o.jsx)(G,{electionCounter:d}),t.map((function(e,n){return Object(o.jsxs)(i.Fragment,{children:[n===a?Object(o.jsx)(y,{}):Object(o.jsx)(o.Fragment,{}),n===(null===u||void 0===u?void 0:u.chancellor)?Object(o.jsx)(O,{}):Object(o.jsx)(o.Fragment,{}),Object(o.jsx)(A,{player:e}),"vote"===c?Object(o.jsx)(L,{playerId:n,onVote:function(e){return v(T(e))},playerVotes:r}):Object(o.jsx)(o.Fragment,{})]},n)})),c?g[c]:Object(o.jsx)(s,{onClick:function(){return v(w())},children:"Start"}),Object(o.jsx)(C,{})]})}t(33);var _=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,35)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))},ee=Object(P.a)({reducer:{gameState:Z,policyDeck:X}});a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(l.a,{store:ee,children:Object(o.jsx)($,{})})}),document.getElementById("root")),_()}},[[34,1,2]]]);
//# sourceMappingURL=main.8e4f6ebc.chunk.js.map